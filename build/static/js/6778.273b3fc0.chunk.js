/*! For license information please see 6778.273b3fc0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[6778,1453],{67523:(e,t,a)=>{a.d(t,{A:()=>x});a(38421);var r=a(14282),s=a(98139),o=a.n(s),n=a(65043),i=a(67852),l=a(70579);const d=n.forwardRef(((e,t)=>{let{bsPrefix:a,fluid:r=!1,as:s="div",className:n,...d}=e;const c=(0,i.oU)(a,"container"),p="string"===typeof r?"-".concat(r):"-fluid";return(0,l.jsx)(s,{ref:t,...d,className:o()(n,r?"".concat(c).concat(p):c)})}));d.displayName="Container";const c=d;var p=a(69272),u=a(404),m=a(20364),f=(a(32048),a(1880)),g=a(73216),h=a(13204);const x=function(){const e=(0,g.Zp)(),t=(0,g.zy)(),[a,s]=(0,n.useState)((()=>{const e=localStorage.getItem("theme");return!e||"light"!==e}));(0,n.useEffect)((()=>{document.body.classList.toggle("light-mode",!a),localStorage.setItem("theme",a?"dark":"light")}),[a]);const o=()=>{f.A.remove("myCookie"),localStorage.clear(),sessionStorage.clear(),e("/Login")},i=e=>t.pathname===e;return(0,l.jsx)(u.A,{expand:"lg",className:"Nav",children:(0,l.jsxs)(c,{fluid:!0,children:[(0,l.jsx)(u.A.Brand,{href:"/User",className:"Heading",children:"Online Voting System"}),(0,l.jsx)(u.A.Toggle,{"aria-controls":"navbarScroll"}),(0,l.jsxs)(u.A.Collapse,{id:"navbarScroll",children:[(0,l.jsxs)(p.A,{className:"me-auto my-2 my-lg-0 Nav-items-container",style:{maxHeight:"100px"},navbarScroll:!0,children:[(0,l.jsx)(p.A.Link,{className:"Nav-items ".concat(i("/User")?"active":""),href:"/User",children:"Home"}),(0,l.jsx)(p.A.Link,{className:"Nav-items ".concat(i("/Vote")?"active":""),href:"/Vote",children:"Vote Now"}),(0,l.jsx)(p.A.Link,{className:"Nav-items ".concat(i("/Results")?"active":""),href:"/Results",children:"View Results"}),(0,l.jsx)(p.A.Link,{className:"Nav-items ".concat(i("/registerCandidate")?"active":""),href:"/registerCandidate",children:"Register as Candidate"}),(0,l.jsxs)(m.A,{title:"My Account",id:"account-dropdown",className:"Nav-items",children:[(0,l.jsx)(m.A.Item,{href:"/User",children:"Profile"}),(0,l.jsx)(m.A.Item,{href:"/Edit",children:"Edit Profile"}),(0,l.jsx)(m.A.Divider,{}),(0,l.jsx)(m.A.Item,{onClick:o,children:"Logout"})]}),(0,l.jsx)(p.A.Link,{className:"Nav-items",href:"/",children:"About System"})]}),(0,l.jsxs)(p.A,{className:"ml-auto",children:[(0,l.jsx)(r.A,{variant:a?"outline-light":"outline-dark",onClick:()=>s((e=>!e)),size:"sm",className:"ThemeToggleButton",style:{marginLeft:"10px",borderColor:"transparent",backgroundColor:"transparent",color:a?"#fff":"#222"},children:a?(0,l.jsx)(h.V6H,{}):(0,l.jsx)(h.wQq,{})}),(0,l.jsx)(r.A,{variant:"outline-light",onClick:o,style:{marginLeft:"10px",borderColor:"#fff",color:"#fff"},children:"Logout"})]})]})]})})}},87277:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(65043),s=(a(57406),a(37354),a(67523)),o=a(77154),n=a(39194),i=a(1880),l=a(73216),d=a(78745),c=(a(92342),a(70579));const p=()=>{const e=(0,l.Zp)(),[t,a]=(0,r.useState)(!1),[p,u]=(0,r.useState)(!0),[m,f]=(0,r.useState)({name:"",email:"",voterId:"",studentId:"",pass:"",re_pass:"",party:"",bio:"",cgpa:""}),[g,h]=(0,r.useState)(null),[x,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{const t=i.A.get("myCookie");if(!t)return d.oR.error("Session expired. Please login again."),void setTimeout((()=>e("/Login")),2e3);o.A.get("".concat(n.C,"/getVoterbyID/").concat(t)).then((e=>{if(e.data.success&&e.data.voter){const t=e.data.voter;h(t.role||"voter"),v(t),f({name:t.name||"",email:t.email||"",voterId:t.voterId||"",studentId:t.voterId||"",pass:"",re_pass:"",party:t.party||t.department||"",bio:t.bio||"",cgpa:t.cgpa||t.age||""})}else d.oR.error("Failed to load profile data")})).catch((e=>{console.error("Error fetching user data:",e),d.oR.error("Failed to load profile data. Please try again.")})).finally((()=>{u(!1)}))}),[e]);const j=e=>{const{name:t,value:a}=e.target;f({...m,[t]:a})};return p?(0,c.jsxs)("div",{children:[(0,c.jsx)(s.A,{}),(0,c.jsx)("section",{className:"signup",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"signup-content",children:(0,c.jsx)("div",{className:"signup-form",children:(0,c.jsx)("h2",{className:"form-title",children:"Loading..."})})})})})]}):(0,c.jsxs)("div",{children:[(0,c.jsx)(s.A,{}),(0,c.jsx)("section",{className:"signup",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"signup-content",children:(0,c.jsxs)("div",{className:"signup-form",children:[(0,c.jsx)("h2",{className:"form-title",children:"candidate"===g?"Edit Your Candidate Profile":"Edit Your Details"}),(0,c.jsx)(d.N9,{}),"candidate"===g&&(0,c.jsxs)("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#e3f2fd",border:"1px solid #2196F3",borderRadius:"4px",color:"#1565c0",fontSize:"14px"},children:[(0,c.jsx)("strong",{children:"Candidate Mode:"})," You can edit your candidate information including party/department, bio, and CGPA."]}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),a(!0),null===g)return d.oR.error("Please wait while we load your profile information..."),void a(!1);if(m.email&&(r=m.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)))return d.oR.error("Please enter a valid email address"),void a(!1);var r,s;if(m.voterId&&(s=m.voterId,!/^WCU\d{7}$/.test(s)))return d.oR.error("Please enter a valid WCU Student ID (format: WCU1234567 - exactly 7 digits)"),void a(!1);if(m.pass||m.re_pass){if(m.pass!==m.re_pass)return d.oR.error("Passwords do not match"),void a(!1);if(m.pass.length<6)return d.oR.error("Password must be at least 6 characters long"),void a(!1)}try{const t=i.A.get("myCookie");if(!t)return d.oR.error("Session expired. Please login again."),void e("/Login");const r="candidate"===g,s={name:m.name,email:m.email,voterId:m.voterId};if(r&&(m.party&&(s.party=m.party),m.bio&&(s.bio=m.bio),m.cgpa&&""!==m.cgpa)){const e=parseFloat(m.cgpa);if(isNaN(e)||e<0||e>4)return d.oR.error("CGPA must be a number between 0 and 4.0"),void a(!1);s.cgpa=e}m.pass&&(s.password=m.pass);const l=r?"".concat(n.C,"/updateCandidate/").concat(t):"".concat(n.C,"/updateVoter/").concat(t),c=await o.A.patch(l,s);c.data.success?(d.oR.success("Profile updated successfully!"),f({...m,pass:"",re_pass:""}),setTimeout((()=>{e("/User")}),2e3)):d.oR.error(c.data.message||"Failed to update profile")}catch(l){console.error("Error updating profile:",l),l.response&&l.response.data&&l.response.data.message?d.oR.error(l.response.data.message):d.oR.error("Failed to update profile. Please try again.")}finally{a(!1)}},className:"register-form",id:"register-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name"}),(0,c.jsx)("input",{type:"text",name:"name",id:"name",value:m.name,onChange:j,placeholder:"Your Name",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"voterId"}),(0,c.jsx)("input",{type:"text",name:"voterId",id:"voterId",value:m.voterId,onChange:j,placeholder:"Your Student ID (e.g., WCU1234567)",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email"}),(0,c.jsx)("input",{type:"email",name:"email",id:"email",value:m.email,onChange:j,placeholder:"Your Gmail Address (e.g., yourname@gmail.com)",required:!0})]}),"candidate"===g&&(0,c.jsxs)(c.Fragment,{children:[x&&x.position&&(0,c.jsxs)("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#e8f5e9",borderRadius:"4px",border:"1px solid #4caf50"},children:[(0,c.jsx)("strong",{children:"Your Position:"})," ",x.position," ",(0,c.jsx)("br",{}),(0,c.jsx)("small",{style:{color:"#666",fontSize:"12px"},children:"(Assigned after election based on vote totals)"})]}),"candidate"===g&&(!x||!x.position)&&(0,c.jsxs)("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107"},children:[(0,c.jsx)("strong",{children:"Position:"})," Will be automatically assigned after the election ends based on your total votes. Highest votes = President, 2nd = Vice President, etc."]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"party"}),(0,c.jsx)("input",{type:"text",name:"party",id:"party",value:m.party,onChange:j,placeholder:"Department/Party (e.g., Computer Science)"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"bio"}),(0,c.jsx)("textarea",{name:"bio",id:"bio",value:m.bio,onChange:j,placeholder:"Your Candidate Bio/Manifesto",rows:"4",style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",fontFamily:"inherit"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"cgpa"}),(0,c.jsx)("input",{type:"number",name:"cgpa",id:"cgpa",value:m.cgpa,onChange:j,placeholder:"CGPA (e.g., 3.5)",min:"0",max:"4.0",step:"0.01"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"pass"}),(0,c.jsx)("input",{type:"password",name:"pass",id:"pass",value:m.pass,onChange:j,placeholder:"New Password (leave blank to keep current)",autoComplete:"new-password"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"re_pass"}),(0,c.jsx)("input",{type:"password",name:"re_pass",id:"re_pass",value:m.re_pass,onChange:j,placeholder:"Repeat new password",autoComplete:"new-password"})]}),(0,c.jsx)("div",{className:"form-group form-button",children:(0,c.jsx)("button",{type:"submit",className:"form-submit",disabled:t,style:{width:"100%",padding:"12px",cursor:t?"not-allowed":"pointer",opacity:t?.7:1},children:t?"Saving...":"Save Changes"})})]})]})})})})]})}},39194:(e,t,a)=>{a.d(t,{C:()=>r});const r="http://localhost:5000"},88726:(e,t,a)=>{a.d(t,{A:()=>r});const r=a(65043).createContext(null)},92342:()=>{},32048:()=>{},57406:()=>{},37354:(e,t,a)=>{e.exports=a.p+"static/media/style.css.9ca26aad3318bb6a049d.map"},58168:(e,t,a)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},r.apply(null,arguments)}a.d(t,{A:()=>r})},25540:(e,t,a)=>{function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}a.d(t,{A:()=>s})},98587:(e,t,a)=>{function r(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;a[r]=e[r]}return a}a.d(t,{A:()=>r})},1880:(e,t,a)=>{function r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}a.d(t,{A:()=>s});var s=function e(t,a){function s(e,s,o){if("undefined"!==typeof document){"number"===typeof(o=r({},a,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var i in o)o[i]&&(n+="; "+i,!0!==o[i]&&(n+="="+o[i].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+n}}return Object.create({set:s,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},s=0;s<a.length;s++){var o=a[s].split("="),n=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(r[i]=t.read(n,i),e===i)break}catch(l){}}return e?r[e]:r}},remove:function(e,t){s(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=6778.273b3fc0.chunk.js.map