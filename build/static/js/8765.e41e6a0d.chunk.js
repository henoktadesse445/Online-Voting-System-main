"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[8765],{97051:(e,t,n)=>{n.d(t,{A:()=>A});n(38421);var r=n(14282),o=n(53519),i=n(88649),s=n(52624),a=(n(32048),n(1880)),c=n(73216),l=n(65043),d=n(13204),h=n(12841),g=n(26240),x=n(70579);const A=function(){const e=(0,c.Zp)(),t=(0,c.zy)(),n=(0,g.A)(),A=(0,l.useContext)(h.Ig),m="dark"===n.palette.mode,j=e=>t.pathname===e;return(0,x.jsx)(s.A,{expand:"lg",className:"Nav",children:(0,x.jsxs)(o.A,{fluid:!0,children:[(0,x.jsx)(s.A.Brand,{href:"/User",className:"Heading",children:"Online Voting System"}),(0,x.jsx)(s.A.Toggle,{"aria-controls":"navbarScroll"}),(0,x.jsxs)(s.A.Collapse,{id:"navbarScroll",children:[(0,x.jsxs)(i.A,{className:"me-auto my-2 my-lg-0 Nav-items-container",style:{maxHeight:"100px"},navbarScroll:!0,children:[(0,x.jsx)(i.A.Link,{className:"Nav-items ".concat(j("/User")?"active":""),href:"/User",children:"Home"}),(0,x.jsx)(i.A.Link,{className:"Nav-items ".concat(j("/Vote")?"active":""),href:"/Vote",children:"Vote Now"}),(0,x.jsx)(i.A.Link,{className:"Nav-items ".concat(j("/Results")?"active":""),href:"/Results",children:"View Results"}),(0,x.jsx)(i.A.Link,{className:"Nav-items ".concat(j("/registerCandidate")?"active":""),href:"/registerCandidate",children:"Register as Candidate"}),(0,x.jsx)(i.A.Link,{className:"Nav-items ".concat(j("/Edit")?"active":""),href:"/Edit",children:"My Account"})]}),(0,x.jsxs)(i.A,{className:"ml-auto",children:[(0,x.jsx)(r.A,{variant:m?"outline-light":"outline-dark",onClick:A.toggleColorMode,size:"sm",className:"ThemeToggleButton",style:{marginLeft:"10px",borderColor:"transparent",backgroundColor:"transparent",color:m?"#fff":"#222"},children:m?(0,x.jsx)(d.V6H,{}):(0,x.jsx)(d.wQq,{})}),(0,x.jsx)(r.A,{variant:m?"outline-light":"outline-primary",onClick:()=>{const t=localStorage.getItem("theme");a.A.remove("myCookie"),localStorage.clear(),sessionStorage.clear(),t&&localStorage.setItem("theme",t),e("/Login")},style:{marginLeft:"10px",borderRadius:"0.5rem",fontWeight:"600"},children:"Logout"})]})]})]})})}},18765:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(65043),o=n(77154),i=n(39194),s=n(97051),a=n(96446),c=n(81637),l=n(85865),d=n(19252),h=n(63336),g=n(11906),x=n(68903),A=n(43845),m=n(10611),j=n(42796),b=n(75155),y=n(21665),u=n(47805),p=n(45969),v=n(55376),f=n(12841),C=n(70579);const k=()=>{const[e,t]=(0,f.b2)(),n=(0,f.LU)(e.palette.mode),[k,W]=(0,r.useState)([]),[w,S]=(0,r.useState)({}),[N,R]=(0,r.useState)(!0),[I,L]=(0,r.useState)(0),[P,V]=(0,r.useState)(new Date),[z,H]=(0,r.useState)(!1),E=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?H(!0):R(!0);try{const e=await o.A.get("".concat(i.C,"/api/winnersByPosition"));e.data.success&&S(e.data.winners);const t=await o.A.get("".concat(i.C,"/getCandidate")),n=t.data.candidate.sort(((e,t)=>(t.votes||0)-(e.votes||0)));W(n);const r=n.reduce(((e,t)=>e+(t.votes||0)),0);L(r),V(new Date)}catch(e){console.error("Error fetching results:",e)}finally{R(!1),H(!1)}};(0,r.useEffect)((()=>{E();const e=setInterval((()=>{E()}),1e4);return()=>clearInterval(e)}),[]);const T=e=>0===I?0:(e/I*100).toFixed(1),F=e=>"".concat(e+1);return N?(0,C.jsx)(f.Ig.Provider,{value:t,children:(0,C.jsxs)(p.A,{theme:e,children:[(0,C.jsx)(v.Ay,{}),(0,C.jsxs)(a.A,{sx:{backgroundColor:n.primary[500],minHeight:"100vh"},children:[(0,C.jsx)(s.A,{}),(0,C.jsxs)(a.A,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:[(0,C.jsx)(c.A,{sx:{color:n.greenAccent[500],mb:2}}),(0,C.jsx)(l.A,{variant:"h6",color:n.grey[100],children:"Loading election results..."})]})]})]})}):(0,C.jsx)(f.Ig.Provider,{value:t,children:(0,C.jsxs)(p.A,{theme:e,children:[(0,C.jsx)(v.Ay,{}),(0,C.jsxs)(a.A,{sx:{backgroundColor:n.primary[500],minHeight:"100vh",pb:4},children:[(0,C.jsx)(s.A,{}),(0,C.jsxs)(d.A,{maxWidth:"xl",sx:{pt:4},children:[(0,C.jsxs)(h.A,{elevation:3,sx:{p:4,mb:4,backgroundColor:n.primary[400],textAlign:"center"},children:[(0,C.jsxs)(a.A,{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2,children:[(0,C.jsx)(j.A,{sx:{fontSize:40,color:n.greenAccent[500]}}),(0,C.jsx)(l.A,{variant:"h3",color:n.grey[100],fontWeight:"bold",children:"Live Election Results"})]}),(0,C.jsx)(l.A,{variant:"h6",color:n.grey[300],mb:3,children:"Real-time voting results - Auto-updates every 10 seconds"}),(0,C.jsxs)(a.A,{display:"flex",justifyContent:"center",gap:3,mb:3,sx:{flexWrap:"wrap"},children:[(0,C.jsxs)(h.A,{elevation:2,sx:{p:3,backgroundColor:n.blueAccent[700],minWidth:"200px",display:"flex",alignItems:"center",gap:2},children:[(0,C.jsx)(b.A,{sx:{fontSize:30,color:n.grey[100]}}),(0,C.jsxs)(a.A,{children:[(0,C.jsx)(l.A,{variant:"h4",color:n.grey[100],fontWeight:"bold",children:k.length}),(0,C.jsx)(l.A,{variant:"body2",color:n.grey[300],children:"Candidates"})]})]}),(0,C.jsxs)(h.A,{elevation:2,sx:{p:3,backgroundColor:n.greenAccent[700],minWidth:"200px",display:"flex",alignItems:"center",gap:2},children:[(0,C.jsx)(y.A,{sx:{fontSize:30,color:n.grey[100]}}),(0,C.jsxs)(a.A,{children:[(0,C.jsx)(l.A,{variant:"h4",color:n.grey[100],fontWeight:"bold",children:I}),(0,C.jsx)(l.A,{variant:"body2",color:n.grey[300],children:"Total Votes"})]})]})]}),(0,C.jsx)(g.A,{variant:"contained",onClick:()=>E(!0),disabled:z,startIcon:(0,C.jsx)(u.A,{sx:{animation:z?"spin 1s linear infinite":"none"}}),sx:{backgroundColor:n.blueAccent[600],color:n.grey[100],"&:hover":{backgroundColor:n.blueAccent[700]},mb:2},children:z?"Refreshing...":"Refresh Now"}),(0,C.jsxs)(l.A,{variant:"body2",color:n.grey[300],children:["Last updated: ",P.toLocaleTimeString()]})]}),(0,C.jsxs)(h.A,{elevation:3,sx:{p:4,mb:4,backgroundColor:n.primary[400]},children:[(0,C.jsxs)(a.A,{display:"flex",alignItems:"center",gap:2,mb:3,children:[(0,C.jsx)(y.A,{sx:{fontSize:40,color:n.greenAccent[500]}}),(0,C.jsxs)(a.A,{children:[(0,C.jsx)(l.A,{variant:"h4",color:n.grey[100],fontWeight:"bold",children:"Winners by Position"}),(0,C.jsx)(l.A,{variant:"body2",color:n.grey[300],sx:{mt:.5},children:"Positions are automatically assigned after election ends based on vote totals"})]})]}),(0,C.jsx)(x.Ay,{container:!0,spacing:3,children:["President","Vice President","Secretary","Finance Officer","Public Relations Officer","Sports & Recreation Officer","Gender and Equality Officer"].map((e=>{var t;const r=w[e];return(0,C.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,C.jsxs)(h.A,{elevation:r?4:2,sx:{p:3,backgroundColor:r?n.greenAccent[800]:n.primary[600],border:r?"3px solid ".concat(n.greenAccent[500]):"none",borderRadius:2,height:"100%"},children:[(0,C.jsx)(l.A,{variant:"h6",color:n.grey[100],fontWeight:"bold",mb:2,children:e}),r&&r.candidate?(0,C.jsxs)(a.A,{children:[(0,C.jsxs)(a.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[r.candidate.img?(0,C.jsx)(a.A,{component:"img",src:"".concat(i.C).concat(r.candidate.img),alt:r.candidate.name,sx:{width:60,height:60,borderRadius:"50%",objectFit:"cover",border:"3px solid ".concat(n.greenAccent[500])}}):(0,C.jsx)(a.A,{sx:{width:60,height:60,borderRadius:"50%",backgroundColor:n.greenAccent[700],display:"flex",alignItems:"center",justifyContent:"center",color:n.grey[100],fontSize:"1.8rem",fontWeight:"bold"},children:(null===(t=r.candidate.name)||void 0===t?void 0:t.charAt(0))||"?"}),(0,C.jsxs)(a.A,{children:[(0,C.jsx)(l.A,{variant:"h6",color:n.grey[100],fontWeight:"bold",children:r.candidate.name}),(0,C.jsx)(l.A,{variant:"body2",color:n.grey[300],children:r.candidate.party||r.candidate.department||"Not specified"})]})]}),(0,C.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,C.jsx)(l.A,{variant:"body1",color:n.grey[300],children:"Votes:"}),(0,C.jsx)(l.A,{variant:"h5",color:n.greenAccent[400],fontWeight:"bold",children:r.voteCount||0})]}),(0,C.jsx)(A.A,{icon:(0,C.jsx)(y.A,{}),label:"Winner!",sx:{mt:2,backgroundColor:n.greenAccent[600],color:n.grey[100],fontWeight:"bold",width:"100%"}})]}):(0,C.jsx)(l.A,{variant:"body1",color:n.grey[300],textAlign:"center",children:"Position not assigned yet (wait for election to end)"})]})},e)}))})]}),(0,C.jsxs)(h.A,{elevation:3,sx:{p:4,mb:4,backgroundColor:n.primary[400]},children:[(0,C.jsx)(l.A,{variant:"h4",color:n.grey[100],fontWeight:"bold",mb:3,children:"All Candidates Results"}),(0,C.jsx)(x.Ay,{container:!0,spacing:3,children:0===k.length?(0,C.jsx)(x.Ay,{item:!0,xs:12,children:(0,C.jsxs)(h.A,{elevation:3,sx:{p:5,textAlign:"center",backgroundColor:n.primary[400]},children:[(0,C.jsx)(l.A,{variant:"h5",color:n.grey[100],gutterBottom:!0,children:"No candidates registered yet"}),(0,C.jsx)(l.A,{variant:"body1",color:n.grey[300],children:"Check back later for election results"})]})}):k.map(((e,t)=>{var r;return(0,C.jsx)(x.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,C.jsxs)(h.A,{elevation:0===t?6:3,sx:{p:3,backgroundColor:n.primary[400],border:0===t?"3px solid ".concat(n.greenAccent[600]):"none",borderRadius:2,height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:6}},children:[(0,C.jsxs)(a.A,{display:"flex",alignItems:"center",gap:2,mb:3,children:[(0,C.jsx)(a.A,{sx:{fontSize:"2rem",minWidth:"50px",textAlign:"center",fontWeight:"bold"},children:F(t)}),(0,C.jsx)(a.A,{children:e.img?(0,C.jsx)(a.A,{component:"img",src:e.img,alt:e.name,sx:{width:60,height:60,borderRadius:"50%",objectFit:"cover",border:"3px solid ".concat(n.blueAccent[500])}}):(0,C.jsx)(a.A,{sx:{width:60,height:60,borderRadius:"50%",backgroundColor:n.blueAccent[600],display:"flex",alignItems:"center",justifyContent:"center",color:n.grey[100],fontSize:"1.8rem",fontWeight:"bold"},children:(null===(r=e.name)||void 0===r?void 0:r.charAt(0))||"?"})}),(0,C.jsxs)(a.A,{flexGrow:1,children:[(0,C.jsx)(l.A,{variant:"h6",color:n.grey[100],fontWeight:"bold",noWrap:!0,children:e.name||"Unknown"}),(0,C.jsx)(l.A,{variant:"body2",color:n.grey[300],children:e.party||e.department||"Not specified"}),e.position&&(0,C.jsxs)(l.A,{variant:"body2",color:n.greenAccent[400],fontWeight:"bold",sx:{mt:.5},children:["Position: ",e.position]})]})]}),(0,C.jsxs)(a.A,{children:[(0,C.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,C.jsx)(l.A,{variant:"body1",color:n.grey[300],fontWeight:"bold",children:"Votes:"}),(0,C.jsx)(l.A,{variant:"h5",color:n.greenAccent[400],fontWeight:"bold",children:e.votes||0})]}),(0,C.jsxs)(a.A,{mb:2,children:[(0,C.jsx)(m.A,{variant:"determinate",value:parseFloat(T(e.votes||0)),sx:{height:25,borderRadius:2,backgroundColor:n.primary[600],"& .MuiLinearProgress-bar":{backgroundColor:0===t?n.greenAccent[500]:1===t?n.blueAccent[500]:2===t?n.redAccent[500]:n.grey[600],borderRadius:2}}}),(0,C.jsxs)(l.A,{variant:"body2",color:n.grey[100],mt:.5,textAlign:"center",fontWeight:"bold",children:[T(e.votes||0),"%"]})]}),0===t&&I>0&&(0,C.jsx)(A.A,{icon:(0,C.jsx)(y.A,{}),label:"Currently Leading!",sx:{backgroundColor:n.greenAccent[600],color:n.grey[100],fontWeight:"bold",width:"100%"}})]})]})},e._id)}))})]}),(0,C.jsx)(h.A,{elevation:2,sx:{p:3,mt:5,textAlign:"center",backgroundColor:n.primary[400]},children:(0,C.jsxs)(l.A,{variant:"body1",color:n.grey[100],children:[(0,C.jsx)("strong",{children:"Note:"})," Results are updated in real-time. The final results will be announced after the voting period ends."]})})]})]})]})})}},39194:(e,t,n)=>{n.d(t,{C:()=>r});const r="http://localhost:5000"},32048:()=>{}}]);
//# sourceMappingURL=8765.e41e6a0d.chunk.js.map