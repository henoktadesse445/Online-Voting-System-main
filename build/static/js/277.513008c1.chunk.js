/*! For license information please see 277.513008c1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[277],{67523:(e,a,r)=>{r.d(a,{A:()=>x});r(38421);var t=r(14282),o=r(98139),s=r.n(o),i=r(65043),n=r(67852),d=r(70579);const l=i.forwardRef(((e,a)=>{let{bsPrefix:r,fluid:t=!1,as:o="div",className:i,...l}=e;const c=(0,n.oU)(r,"container"),p="string"===typeof t?"-".concat(t):"-fluid";return(0,d.jsx)(o,{ref:a,...l,className:s()(i,t?"".concat(c).concat(p):c)})}));l.displayName="Container";const c=l;var p=r(69272),m=r(404),u=r(20364),g=(r(32048),r(1880)),h=r(73216),f=r(13204);const x=function(){const e=(0,h.Zp)(),a=(0,h.zy)(),[r,o]=(0,i.useState)((()=>{const e=localStorage.getItem("theme");return!e||"light"!==e}));(0,i.useEffect)((()=>{document.body.classList.toggle("light-mode",!r),localStorage.setItem("theme",r?"dark":"light")}),[r]);const s=()=>{g.A.remove("myCookie"),localStorage.clear(),sessionStorage.clear(),e("/Login")},n=e=>a.pathname===e;return(0,d.jsx)(m.A,{expand:"lg",className:"Nav",children:(0,d.jsxs)(c,{fluid:!0,children:[(0,d.jsx)(m.A.Brand,{href:"/User",className:"Heading",children:"Online Voting System"}),(0,d.jsx)(m.A.Toggle,{"aria-controls":"navbarScroll"}),(0,d.jsxs)(m.A.Collapse,{id:"navbarScroll",children:[(0,d.jsxs)(p.A,{className:"me-auto my-2 my-lg-0 Nav-items-container",style:{maxHeight:"100px"},navbarScroll:!0,children:[(0,d.jsx)(p.A.Link,{className:"Nav-items ".concat(n("/User")?"active":""),href:"/User",children:"Home"}),(0,d.jsx)(p.A.Link,{className:"Nav-items ".concat(n("/Vote")?"active":""),href:"/Vote",children:"Vote Now"}),(0,d.jsx)(p.A.Link,{className:"Nav-items ".concat(n("/Results")?"active":""),href:"/Results",children:"View Results"}),(0,d.jsx)(p.A.Link,{className:"Nav-items ".concat(n("/registerCandidate")?"active":""),href:"/registerCandidate",children:"Register as Candidate"}),(0,d.jsxs)(u.A,{title:"My Account",id:"account-dropdown",className:"Nav-items",children:[(0,d.jsx)(u.A.Item,{href:"/User",children:"Profile"}),(0,d.jsx)(u.A.Item,{href:"/Edit",children:"Edit Profile"}),(0,d.jsx)(u.A.Divider,{}),(0,d.jsx)(u.A.Item,{onClick:s,children:"Logout"})]}),(0,d.jsx)(p.A.Link,{className:"Nav-items",href:"/",children:"About System"})]}),(0,d.jsxs)(p.A,{className:"ml-auto",children:[(0,d.jsx)(t.A,{variant:r?"outline-light":"outline-dark",onClick:()=>o((e=>!e)),size:"sm",className:"ThemeToggleButton",style:{marginLeft:"10px",borderColor:"transparent",backgroundColor:"transparent",color:r?"#fff":"#222"},children:r?(0,d.jsx)(f.V6H,{}):(0,d.jsx)(f.wQq,{})}),(0,d.jsx)(t.A,{variant:"outline-light",onClick:s,style:{marginLeft:"10px",borderColor:"#fff",color:"#fff"},children:"Logout"})]})]})]})})}},87277:(e,a,r)=>{r.r(a),r.d(a,{default:()=>p});var t=r(65043),o=(r(57406),r(37354),r(67523)),s=r(77154),i=r(39194),n=r(1880),d=r(73216),l=r(78745),c=(r(92342),r(70579));const p=()=>{const e=(0,d.Zp)(),[a,r]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!0),[u,g]=(0,t.useState)(!1),[h,f]=(0,t.useState)({name:"",email:"",voterId:"",studentId:"",pass:"",re_pass:"",party:"",bio:"",cgpa:""}),[x,v]=(0,t.useState)(null),[y,j]=(0,t.useState)(null);(0,t.useEffect)((()=>{const a=n.A.get("myCookie");if(!a)return l.oR.error("Session expired. Please login again."),void setTimeout((()=>e("/Login")),2e3);s.A.get("".concat(i.C,"/getVoterbyID/").concat(a)).then((e=>{if(e.data.success&&e.data.voter){const a=e.data.voter;v(a.role||"voter"),j(a),f({name:a.name||"",email:a.email||"",voterId:a.voterId||"",studentId:a.voterId||"",pass:"",re_pass:"",party:a.party||a.department||"",bio:a.bio||"",cgpa:a.cgpa||a.age||""})}else l.oR.error("Failed to load profile data")})).catch((e=>{console.error("Error fetching user data:",e),l.oR.error("Failed to load profile data. Please try again.")})).finally((()=>{m(!1)}))}),[e]);const b=e=>{const{name:a,value:r}=e.target;f({...h,[a]:r})};return p?(0,c.jsxs)("div",{children:[(0,c.jsx)(o.A,{}),(0,c.jsx)("section",{className:"signup",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"signup-content",children:(0,c.jsx)("div",{className:"signup-form",children:(0,c.jsx)("h2",{className:"form-title",children:"Loading..."})})})})})]}):(0,c.jsxs)("div",{children:[(0,c.jsx)(o.A,{}),(0,c.jsx)("section",{className:"signup",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"signup-content",children:(0,c.jsxs)("div",{className:"signup-form",children:[(0,c.jsx)("h2",{className:"form-title",children:"candidate"===x?"Edit Your Candidate Profile":"Edit Your Details"}),(0,c.jsx)(l.N9,{}),"candidate"===x&&(0,c.jsxs)("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#e3f2fd",border:"1px solid #2196F3",borderRadius:"4px",color:"#1565c0",fontSize:"14px"},children:[(0,c.jsx)("strong",{children:"Candidate Mode:"})," You can edit your candidate information including party/department, bio, and CGPA."]}),(0,c.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),r(!0),null===x)return l.oR.error("Please wait while we load your profile information..."),void r(!1);if(h.email&&(t=h.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)))return l.oR.error("Please enter a valid email address"),void r(!1);var t,o;if(h.voterId&&(o=h.voterId,!/^WCU\d{7}$/.test(o)))return l.oR.error("Please enter a valid WCU Student ID (format: WCU1234567 - exactly 7 digits)"),void r(!1);if(h.pass||h.re_pass){if(h.pass!==h.re_pass)return l.oR.error("Passwords do not match"),void r(!1);if(h.pass.length<6)return l.oR.error("Password must be at least 6 characters long"),void r(!1)}try{const a=n.A.get("myCookie");if(!a)return l.oR.error("Session expired. Please login again."),void e("/Login");const t="candidate"===x,o={name:h.name,email:h.email,voterId:h.voterId};if(t&&(h.party&&(o.party=h.party),h.bio&&(o.bio=h.bio),h.cgpa&&""!==h.cgpa)){const e=parseFloat(h.cgpa);if(isNaN(e)||e<0||e>4)return l.oR.error("CGPA must be a number between 0 and 4.0"),void r(!1);o.cgpa=e}h.pass&&(o.password=h.pass);const d=t?"".concat(i.C,"/updateCandidate/").concat(a):"".concat(i.C,"/updateVoter/").concat(a),c=await s.A.patch(d,o);c.data.success?(l.oR.success("Profile updated successfully!"),f({...h,pass:"",re_pass:""}),setTimeout((()=>{e("/User")}),2e3)):l.oR.error(c.data.message||"Failed to update profile")}catch(d){console.error("Error updating profile:",d),d.response&&d.response.data&&d.response.data.message?l.oR.error(d.response.data.message):l.oR.error("Failed to update profile. Please try again.")}finally{r(!1)}},className:"register-form",id:"register-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name"}),(0,c.jsx)("input",{type:"text",name:"name",id:"name",value:h.name,onChange:b,placeholder:"Your Name",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"voterId"}),(0,c.jsx)("input",{type:"text",name:"voterId",id:"voterId",value:h.voterId,onChange:b,placeholder:"Your Student ID (e.g., WCU1234567)",required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email"}),(0,c.jsx)("input",{type:"email",name:"email",id:"email",value:h.email,onChange:b,placeholder:"Your Gmail Address (e.g., yourname@gmail.com)",required:!0})]}),"candidate"===x&&(0,c.jsxs)(c.Fragment,{children:[y&&y.position&&(0,c.jsxs)("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#e8f5e9",borderRadius:"4px",border:"1px solid #4caf50"},children:[(0,c.jsx)("strong",{children:"Your Position:"})," ",y.position," ",(0,c.jsx)("br",{}),(0,c.jsx)("small",{style:{color:"#666",fontSize:"12px"},children:"(Assigned after election based on vote totals)"})]}),"candidate"===x&&(!y||!y.position)&&(0,c.jsxs)("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#fff3cd",borderRadius:"4px",border:"1px solid #ffc107"},children:[(0,c.jsx)("strong",{children:"Position:"})," Will be automatically assigned after the election ends based on your total votes. Highest votes = President, 2nd = Vice President, etc."]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"party"}),(0,c.jsx)("input",{type:"text",name:"party",id:"party",value:h.party,onChange:b,placeholder:"Department/Party (e.g., Computer Science)"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"bio"}),(0,c.jsx)("textarea",{name:"bio",id:"bio",value:h.bio,onChange:b,placeholder:"Your Candidate Bio/Manifesto",rows:"4",style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",fontFamily:"inherit"}})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"cgpa"}),(0,c.jsx)("input",{type:"number",name:"cgpa",id:"cgpa",value:h.cgpa,onChange:b,placeholder:"CGPA (e.g., 3.5)",min:"0",max:"4.0",step:"0.01"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"pass"}),(0,c.jsx)("input",{type:"password",name:"pass",id:"pass",value:h.pass,onChange:b,placeholder:"New Password (leave blank to keep current)",autoComplete:"new-password"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"re_pass"}),(0,c.jsx)("input",{type:"password",name:"re_pass",id:"re_pass",value:h.re_pass,onChange:b,placeholder:"Repeat new password",autoComplete:"new-password"})]}),(0,c.jsx)("div",{className:"form-group form-button",children:(0,c.jsx)("button",{type:"submit",className:"form-submit",disabled:a,style:{width:"100%",padding:"12px",cursor:a?"not-allowed":"pointer",opacity:a?.7:1},children:a?"Saving...":"Save Changes"})}),"candidate"===x&&(0,c.jsxs)("div",{className:"form-group form-button",style:{marginTop:"20px"},children:[(0,c.jsx)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to withdraw your candidacy? This action will revert you to voter status and clear your candidate information.")){g(!0);try{const a=n.A.get("myCookie");if(!a)return l.oR.error("Session expired. Please login again."),void e("/Login");const r=await s.A.post("".concat(i.C,"/api/withdrawCandidacy/").concat(a));r.data.success?(l.oR.success("Candidacy withdrawn successfully! Redirecting..."),setTimeout((()=>{e("/User"),window.location.reload()}),2e3)):l.oR.error(r.data.message||"Failed to withdraw candidacy")}catch(a){console.error("Error withdrawing candidacy:",a),a.response&&a.response.data&&a.response.data.message?l.oR.error(a.response.data.message):l.oR.error("Failed to withdraw candidacy. Please try again.")}finally{g(!1)}}},disabled:u||a,style:{width:"100%",padding:"12px",cursor:u||a?"not-allowed":"pointer",opacity:u||a?.7:1,backgroundColor:"#d32f2f",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold"},children:u?"Withdrawing...":"Withdraw Candidacy"}),(0,c.jsx)("small",{style:{display:"block",marginTop:"10px",color:"#666",fontSize:"12px",textAlign:"center"},children:"This will revert you to voter status and remove your candidate profile"})]})]})]})})})})]})}},39194:(e,a,r)=>{r.d(a,{C:()=>t});const t="http://localhost:5000"},92342:()=>{},32048:()=>{},57406:()=>{},37354:(e,a,r)=>{e.exports=r.p+"static/media/style.css.9ca26aad3318bb6a049d.map"},1880:(e,a,r)=>{function t(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)e[t]=r[t]}return e}r.d(a,{A:()=>o});var o=function e(a,r){function o(e,o,s){if("undefined"!==typeof document){"number"===typeof(s=t({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var n in s)s[n]&&(i+="; "+n,!0!==s[n]&&(i+="="+s[n].split(";")[0]));return document.cookie=e+"="+a.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],t={},o=0;o<r.length;o++){var s=r[o].split("="),i=s.slice(1).join("=");try{var n=decodeURIComponent(s[0]);if(t[n]=a.read(i,n),e===n)break}catch(d){}}return e?t[e]:t}},remove:function(e,a){o(e,"",t({},a,{expires:-1}))},withAttributes:function(a){return e(this.converter,t({},this.attributes,a))},withConverter:function(a){return e(t({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=277.513008c1.chunk.js.map