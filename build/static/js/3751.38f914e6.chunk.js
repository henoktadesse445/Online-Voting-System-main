"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[3751],{6912:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(26240),a=n(96446),r=n(85865),i=n(12841),c=n(70579);const s=e=>{let{title:t,subtitle:n}=e;const s=(0,o.A)(),l=(0,i.LU)(s.palette.mode);return(0,c.jsxs)(a.A,{mb:"0px",children:[(0,c.jsx)(r.A,{variant:"h2",color:l.grey[100],fontWeight:"bold",sx:{m:"0 0 5px 0"},children:t}),(0,c.jsx)(r.A,{variant:"h5",color:l.greenAccent[400],children:n})]})}},87926:(e,t,n)=>{n.d(t,{A:()=>C});var o=n(65043),a=n(34223),r=(n(65645),n(26240)),i=n(85865),c=n(96446),s=n(35475),l=n(12841),d=n(41025),x=n(17921),g=n(97343),h=n(97895),A=n(46085),p=n(33639),u=n(14789),f=n(44413),m=n(92577),j=n(22738),b=n(19697),v=n(10507),y=n(70579);const S=e=>{let{title:t,to:n,icon:o,selected:c,setSelected:d}=e;const x=(0,r.A)(),g=(0,l.LU)(x.palette.mode);return(0,y.jsxs)(a.Dr,{active:c===t,style:{color:g.grey[100]},onClick:()=>d(t),icon:o,children:[(0,y.jsx)(i.A,{children:t}),(0,y.jsx)(s.N_,{to:n})]})},C=()=>{const e=(0,r.A)(),t=(0,l.LU)(e.palette.mode),[n,s]=(0,o.useState)(!1),[C,k]=(0,o.useState)("Dashboard");return(0,y.jsx)(c.A,{display:"inline-flex",sx:{"& .pro-sidebar":{width:"240px",minWidth:"240px"},"& .pro-item-content p":{color:t.grey[100]},"& .pro-item-content:hover":{color:"#868dfb"},"& .pro-sidebar-inner":{background:"".concat(t.primary[400]," !important")},"& .pro-icon-wrapper":{backgroundColor:"transparent !important"},"& .pro-inner-item":{padding:"5px 3px 5px 20px !important",width:"100%"},"& .pro-inner-item:hover":{color:"#868dfb !important"},"& .pro-menu-item.active":{color:"#6870fa !important"},position:"relative"},children:(0,y.jsx)(a.M9,{collapsed:n,children:(0,y.jsxs)(a.W1,{iconShape:"square",children:[(0,y.jsx)(a.Dr,{onClick:()=>s(!n),icon:n?(0,y.jsx)(f.A,{}):void 0,style:{margin:"10px 0 20px 0",color:t.grey[100]},children:!n&&(0,y.jsx)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",ml:"1px",children:(0,y.jsx)(i.A,{variant:"h3",color:t.grey[100],children:"ADMINIS"})})}),(0,y.jsxs)(c.A,{paddingLeft:n?void 0:"1%",children:[(0,y.jsx)(S,{title:"Dashboard",to:"/Admin",icon:(0,y.jsx)(d.A,{}),selected:C,setSelected:k,color:t.greenAccent[400]}),(0,y.jsx)(i.A,{variant:"h6",color:t.grey[300],sx:{m:"15px 0 5px 20px"},children:"Data Management"}),(0,y.jsx)(S,{title:"Manage Voters",to:"/Voters",icon:(0,y.jsx)(x.A,{}),selected:C,setSelected:k}),(0,y.jsx)(S,{title:"Candidates Information",to:"/Candidate",icon:(0,y.jsx)(g.A,{}),selected:C,setSelected:k}),(0,y.jsx)(S,{title:"Upload Student List",to:"/studentListUpload",icon:(0,y.jsx)(b.A,{}),selected:C,setSelected:k}),(0,y.jsx)(S,{title:"Student List Info",to:"/studentListInfo",icon:(0,y.jsx)(v.A,{}),selected:C,setSelected:k}),(0,y.jsx)(S,{title:"Pending Candidates",to:"/pendingCandidates",icon:(0,y.jsx)(j.A,{}),selected:C,setSelected:k}),(0,y.jsx)(S,{title:"Contact Messages",to:"/contacts",icon:(0,y.jsx)(u.A,{}),selected:C,setSelected:k}),(0,y.jsx)(i.A,{variant:"h6",color:t.grey[300],sx:{m:"15px 0 5px 20px"},children:"Pages"}),(0,y.jsx)(S,{title:"Calendar",to:"/calendar",icon:(0,y.jsx)(h.A,{}),selected:C,setSelected:k}),(0,y.jsx)(S,{title:"Voting Settings",to:"/votingSettings",icon:(0,y.jsx)(m.A,{}),selected:C,setSelected:k}),(0,y.jsx)(i.A,{variant:"h6",color:t.grey[300],sx:{m:"15px 0 5px 20px"},children:"Charts & Reports"}),(0,y.jsx)(S,{title:"Bar Chart",to:"/BarChart",icon:(0,y.jsx)(A.A,{}),selected:C,setSelected:k}),(0,y.jsx)(i.A,{variant:"h6",color:t.grey[300],sx:{m:"15px 0 5px 20px"},children:"Navigation"}),(0,y.jsx)(S,{title:"Back to Home",to:"/",icon:(0,y.jsx)(p.A,{}),selected:C,setSelected:k})]})]})})})}},30044:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(26240),a=n(96446),r=n(17392),i=n(65043),c=n(12841),s=n(62559),l=n(74727),d=n(76109),x=n(67808),g=n(65523),h=n(83832),A=n(66360),p=n(73216),u=n(70579);const f=()=>{const e=(0,p.Zp)(),t=(0,o.A)(),n=(0,c.LU)(t.palette.mode),f=(0,i.useContext)(c.Ig),[m,j]=(0,i.useState)(!1);return m&&e("/"),(0,u.jsxs)(a.A,{display:"flex",justifyContent:"space-between",p:2,children:[(0,u.jsxs)(a.A,{display:"flex",backgroundColor:n.primary[400],borderRadius:"3px",children:[(0,u.jsx)(s.Ay,{sx:{ml:2,flex:1},placeholder:"Search"}),(0,u.jsx)(r.A,{type:"Button",sx:{p:1},children:(0,u.jsx)(A.A,{})})]}),(0,u.jsxs)(a.A,{display:"flex",children:[(0,u.jsx)(r.A,{onClick:f.toggleColorMode,children:"dark"===t.palette.mode?(0,u.jsx)(d.A,{}):(0,u.jsx)(l.A,{})}),(0,u.jsx)(r.A,{children:(0,u.jsx)(x.A,{})}),(0,u.jsx)(r.A,{children:(0,u.jsx)(g.A,{})}),(0,u.jsx)(r.A,{onClick:()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach((e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")})),j(!0)},children:(0,u.jsx)(h.A,{})})]})]})}},40556:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var o=n(65043),a=n(96446),r=n(17392),i=n(85865),c=n(63336),s=n(67254),l=n(11906),d=n(15795),x=n(74605),g=n(4598),h=n(12841),A=n(45969),p=n(55376),u=n(6912),f=n(30044),m=n(87926),j=n(77154),b=n(39194),v=n(78745),y=n(73216),S=n(69120),C=n(54469),k=n(19280),D=n(48625),w=n(87014),I=n(70579);const T=()=>{const[e,t]=(0,h.b2)(),n=(0,h.LU)(e.palette.mode),T=(0,y.Zp)(),[L,M]=(0,o.useState)(!0),[V,W]=(0,o.useState)(!1),[E,F]=(0,o.useState)(new Date),[N,P]=(0,o.useState)({startDate:"",endDate:"",isActive:!0,electionTitle:"Wachemo University Election",votingActive:!1});(0,o.useEffect)((()=>{U()}),[]),(0,o.useEffect)((()=>{const e=setInterval((()=>{F(new Date)}),1e3);return()=>clearInterval(e)}),[]);const R=e=>{if(!e)return"";const t=new Date(e),n=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return"".concat(n,"-").concat(o,"-").concat(a,"T").concat(r,":").concat(i)},U=async()=>{try{const e=await j.A.get("".concat(b.C,"/api/votingSettings"));if(e.data.success){const t=e.data.settings,n=R(t.startDate),o=R(t.endDate);P({...t,startDate:n,endDate:o})}}catch(e){console.error("Error fetching voting settings:",e),v.oR.error("Failed to load voting settings")}finally{M(!1)}},z=e=>{const{name:t,value:n,type:o,checked:a}=e.target;P((e=>({...e,[t]:"checkbox"===o?a:n})))},B=N.startDate?new Date(N.startDate):null,G=N.endDate?new Date(N.endDate):null,O=N.isActive&&B&&G&&E>=B&&E<=G,H=B&&E<B,Z=G&&E>G,q=(()=>{if(!B||!G)return null;const e=G-B,t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4);let a="";return t>0&&(a+="".concat(t," day").concat(t>1?"s":"")),n>0&&(a+="".concat(a?", ":"").concat(n," hour").concat(n>1?"s":"")),o>0&&0===t&&(a+="".concat(a?", ":"").concat(o," minute").concat(o>1?"s":"")),a||"Less than 1 minute"})(),Y=O&&G?G-E:null,_=H&&B?B-E:null,J=e=>{if(!e||e<=0)return"0 seconds";const t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),a=Math.floor(e%6e4/1e3);let r="";return t>0&&(r+="".concat(t,"d ")),n>0&&(r+="".concat(n,"h ")),o>0&&(r+="".concat(o,"m ")),a>0&&0===t&&(r+="".concat(a,"s")),r.trim()||"Less than 1 second"};return L?(0,I.jsx)(h.Ig.Provider,{value:t,children:(0,I.jsxs)(A.A,{theme:e,children:[(0,I.jsx)(p.Ay,{}),(0,I.jsxs)("div",{className:"appNew",children:[(0,I.jsx)(m.A,{}),(0,I.jsxs)("main",{className:"content",children:[(0,I.jsx)(f.A,{}),(0,I.jsxs)(a.A,{m:"20px",children:[(0,I.jsxs)(a.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,I.jsx)(r.A,{onClick:()=>T("/Admin"),sx:{backgroundColor:n.blueAccent[600],color:n.grey[100],"&:hover":{backgroundColor:n.blueAccent[700]}},children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(u.A,{title:"VOTING SETTINGS",subtitle:"Configure voting period and duration"})]}),(0,I.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:(0,I.jsx)(i.A,{children:"Loading settings..."})})]})]})]})]})}):(0,I.jsx)(h.Ig.Provider,{value:t,children:(0,I.jsxs)(A.A,{theme:e,children:[(0,I.jsx)(p.Ay,{}),(0,I.jsxs)("div",{className:"appNew",children:[(0,I.jsx)(m.A,{}),(0,I.jsxs)("main",{className:"content",children:[(0,I.jsx)(f.A,{}),(0,I.jsxs)(a.A,{m:"20px",children:[(0,I.jsxs)(a.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,I.jsx)(r.A,{onClick:()=>T("/Admin"),sx:{backgroundColor:n.blueAccent[600],color:n.grey[100],"&:hover":{backgroundColor:n.blueAccent[700]}},children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(u.A,{title:"VOTING SETTINGS",subtitle:"Configure voting period and duration"})]}),(0,I.jsxs)(c.A,{elevation:3,sx:{p:3,backgroundColor:n.primary[400],mt:2},children:[B&&G&&(0,I.jsxs)(c.A,{elevation:2,sx:{p:3,mb:3,backgroundColor:n.blueAccent[800],border:"2px solid ".concat(n.blueAccent[600])},children:[(0,I.jsx)(i.A,{variant:"h4",color:n.grey[100],sx:{mb:2,fontWeight:"bold"},children:"Voting Period Summary"}),(0,I.jsxs)(a.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:2},children:[(0,I.jsxs)(a.A,{children:[(0,I.jsx)(i.A,{variant:"h6",color:n.grey[300],sx:{mb:1},children:"Start Date & Time:"}),(0,I.jsx)(i.A,{variant:"h5",color:n.greenAccent[400],sx:{fontWeight:"bold"},children:B.toLocaleString()})]}),(0,I.jsxs)(a.A,{children:[(0,I.jsx)(i.A,{variant:"h6",color:n.grey[300],sx:{mb:1},children:"End Date & Time:"}),(0,I.jsx)(i.A,{variant:"h5",color:n.redAccent[400],sx:{fontWeight:"bold"},children:G.toLocaleString()})]}),(0,I.jsxs)(a.A,{children:[(0,I.jsx)(i.A,{variant:"h6",color:n.grey[300],sx:{mb:1},children:"Total Duration:"}),(0,I.jsx)(i.A,{variant:"h5",color:n.blueAccent[400],sx:{fontWeight:"bold"},children:q})]}),O&&Y&&(0,I.jsxs)(a.A,{children:[(0,I.jsx)(i.A,{variant:"h6",color:n.grey[300],sx:{mb:1},children:"Time Remaining:"}),(0,I.jsx)(i.A,{variant:"h5",color:n.greenAccent[400],sx:{fontWeight:"bold"},children:J(Y)})]}),H&&_&&(0,I.jsxs)(a.A,{children:[(0,I.jsx)(i.A,{variant:"h6",color:n.grey[300],sx:{mb:1},children:"Starts In:"}),(0,I.jsx)(i.A,{variant:"h5",color:n.blueAccent[400],sx:{fontWeight:"bold"},children:J(_)})]})]})]}),(0,I.jsxs)(s.A,{severity:O?"success":H?"info":Z?"warning":N.isActive?"info":"error",sx:{mb:3},children:[O&&"Voting is currently ACTIVE (".concat(J(Y)," remaining)"),H&&"Voting has not started yet. It will begin on ".concat(null===B||void 0===B?void 0:B.toLocaleString()," (in ").concat(J(_),")"),Z&&"Voting has ended on ".concat(null===G||void 0===G?void 0:G.toLocaleString()),!N.isActive&&"Voting is DISABLED by administrator"]}),(0,I.jsxs)(a.A,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[(0,I.jsx)(l.A,{variant:"contained",startIcon:(0,I.jsx)(w.A,{}),onClick:async()=>{if(V)return;const e=new Date,t=new Date(e.getTime()-6e4),n=new Date(e.getTime()+6048e5),o=R(t),a=R(n);W(!0);try{(await j.A.post("".concat(b.C,"/api/votingSettings"),{startDate:o,endDate:a,isActive:!0})).data.success&&(v.oR.success("Voting started NOW! Duration: 7 days"),await U())}catch(r){console.error("Error starting voting:",r),v.oR.error("Failed to start voting now")}finally{W(!1)}},disabled:V,sx:{backgroundColor:n.blueAccent[600],color:"white",flex:1,minWidth:"180px",fontWeight:"bold","&:hover":{backgroundColor:n.blueAccent[700]}},children:"Start Voting Now"}),(0,I.jsx)(l.A,{variant:"contained",startIcon:(0,I.jsx)(C.A,{}),onClick:async()=>{try{(await j.A.post("".concat(b.C,"/api/votingSettings"),{isActive:!0})).data.success&&(v.oR.success("Voting ENABLED"),await U())}catch(e){v.oR.error("Failed to enable voting")}},disabled:V||N.isActive,sx:{backgroundColor:n.greenAccent[600],color:"white",flex:1,minWidth:"150px","&:hover":{backgroundColor:n.greenAccent[700]},"&:disabled":{backgroundColor:n.greenAccent[800],color:n.grey[400]}},children:"Enable Voting"}),(0,I.jsx)(l.A,{variant:"contained",startIcon:(0,I.jsx)(k.A,{}),onClick:async()=>{try{(await j.A.post("".concat(b.C,"/api/votingSettings"),{isActive:!1})).data.success&&(v.oR.success("Voting DISABLED"),await U())}catch(e){v.oR.error("Failed to disable voting")}},disabled:V||!N.isActive,sx:{backgroundColor:n.redAccent[600],color:"white",flex:1,minWidth:"150px","&:hover":{backgroundColor:n.redAccent[700]},"&:disabled":{backgroundColor:n.redAccent[800],color:n.grey[400]}},children:"Disable Voting"}),(0,I.jsx)(l.A,{variant:"outlined",startIcon:(0,I.jsx)(D.A,{}),onClick:U,sx:{borderColor:n.grey[100],color:n.grey[100],minWidth:"150px","&:hover":{borderColor:n.grey[300],backgroundColor:n.primary[500]}},children:"Refresh Status"})]}),(0,I.jsxs)(a.A,{component:"form",sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,I.jsx)(d.A,{label:"Election Title",name:"electionTitle",value:N.electionTitle,onChange:z,fullWidth:!0,variant:"filled",sx:{"& .MuiFilledInput-root":{backgroundColor:n.primary[500]}}}),(0,I.jsx)(d.A,{label:"Voting Start Date & Time",name:"startDate",type:"datetime-local",value:N.startDate,onChange:z,fullWidth:!0,variant:"filled",InputLabelProps:{shrink:!0},sx:{"& .MuiFilledInput-root":{backgroundColor:n.primary[500]}}}),(0,I.jsx)(d.A,{label:"Voting End Date & Time",name:"endDate",type:"datetime-local",value:N.endDate,onChange:z,fullWidth:!0,variant:"filled",InputLabelProps:{shrink:!0},sx:{"& .MuiFilledInput-root":{backgroundColor:n.primary[500]}}}),(0,I.jsx)(x.A,{control:(0,I.jsx)(g.A,{checked:N.isActive,onChange:z,name:"isActive",color:"secondary"}),label:(0,I.jsx)(i.A,{color:n.grey[100],children:"Enable Voting"})}),(0,I.jsxs)(a.A,{display:"flex",gap:2,mt:2,children:[(0,I.jsx)(l.A,{variant:"contained",onClick:async()=>{W(!0);try{const e=await j.A.post("".concat(b.C,"/api/votingSettings"),{startDate:N.startDate,endDate:N.endDate,isActive:N.isActive,electionTitle:N.electionTitle});if(e.data.success){v.oR.success("Voting settings saved successfully!");const t=e.data.settings,n=R(t.startDate),o=R(t.endDate);P({...t,startDate:n,endDate:o})}else v.oR.error(e.data.message||"Failed to save settings")}catch(n){var e,t;console.error("Error saving voting settings:",n);const o=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to save voting settings";v.oR.error(o)}finally{W(!1)}},disabled:V,sx:{backgroundColor:n.greenAccent[600],"&:hover":{backgroundColor:n.greenAccent[700]}},children:V?"Saving...":"Save Settings"}),(0,I.jsx)(l.A,{variant:"outlined",onClick:U,sx:{borderColor:n.grey[100],color:n.grey[100]},children:"Cancel"})]})]})]})]})]})]})]})})}},12841:(e,t,n)=>{n.d(t,{Ig:()=>i,LU:()=>r,b2:()=>c});var o=n(65043),a=n(37344);const r=e=>({..."dark"===e?{grey:{100:"#e0e0e0",200:"#c2c2c2",300:"#a3a3a3",400:"#858585",500:"#666666",600:"#525252",700:"#3d3d3d",800:"#292929",900:"#141414"},primary:{100:"#d0d1d5",200:"#a1a4ab",300:"#727681",400:"#434957",500:"#141b2d",600:"#101624",700:"#0c101b",800:"#080b12",900:"#040509"},greenAccent:{100:"#dbf5ee",200:"#b7ebde",300:"#94e2cd",400:"#70d8bd",500:"#4cceac",600:"#3da58a",700:"#2e7c67",800:"#1e5245",900:"#0f2922"},redAccent:{100:"#f8dcdb",200:"#f1b9b7",300:"#e99592",400:"#e2726e",500:"#db4f4a",600:"#af3f3b",700:"#832f2c",800:"#58201e",900:"#2c100f"},blueAccent:{100:"#e1e2fe",200:"#c3c6fd",300:"#a4a9fc",400:"#868dfb",500:"#6870fa",600:"#535ac8",700:"#3e4396",800:"#2a2d64",900:"#151632"}}:{grey:{100:"#141414",200:"#292929",300:"#3d3d3d",400:"#525252",500:"#666666",600:"#858585",700:"#a3a3a3",800:"#c2c2c2",900:"#e0e0e0"},primary:{100:"#040509",200:"#080b12",300:"#0c101b",400:"#f2f0f0",500:"#141b2d",600:"#434957",700:"#727681",800:"#a1a4ab",900:"#d0d1d5"},greenAccent:{100:"#0f2922",200:"#1e5245",300:"#2e7c67",400:"#3da58a",500:"#4cceac",600:"#70d8bd",700:"#94e2cd",800:"#b7ebde",900:"#dbf5ee"},redAccent:{100:"#2c100f",200:"#58201e",300:"#832f2c",400:"#af3f3b",500:"#db4f4a",600:"#e2726e",700:"#e99592",800:"#f1b9b7",900:"#f8dcdb"},blueAccent:{100:"#151632",200:"#2a2d64",300:"#3e4396",400:"#535ac8",500:"#6870fa",600:"#868dfb",700:"#a4a9fc",800:"#c3c6fd",900:"#e1e2fe"}}}),i=(0,o.createContext)({toggleColorMode:()=>{}}),c=()=>{const[e,t]=(0,o.useState)("dark"),n=(0,o.useMemo)((()=>({toggleColorMode:()=>t((e=>"light"===e?"dark":"light"))})),[]);return[(0,o.useMemo)((()=>(0,a.A)((e=>{const t=r(e);return{palette:{mode:e,..."dark"===e?{primary:{main:t.primary[500]},secondary:{main:t.greenAccent[500]},neutral:{dark:t.grey[700],main:t.grey[500],light:t.grey[100]},background:{default:t.primary[500]}}:{primary:{main:t.primary[100]},secondary:{main:t.greenAccent[500]},neutral:{dark:t.grey[700],main:t.grey[500],light:t.grey[100]},background:{default:"#fcfcfc"}}},typography:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:12,h1:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:32},h2:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:20},h3:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:18},h4:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:14},h5:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:12},h6:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:14}}}})(e))),[e]),n]}},39194:(e,t,n)=>{n.d(t,{C:()=>o});const o="http://localhost:5000"}}]);
//# sourceMappingURL=3751.38f914e6.chunk.js.map