/*! For license information please see 5474.c4a5f446.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[5474,1453],{97051:(e,t,n)=>{n.d(t,{A:()=>m});n(38421);var a=n(14282),s=n(53519),i=n(88649),r=n(52624),o=(n(32048),n(1880)),l=n(73216),d=n(65043),c=n(13204),p=n(12841),u=n(26240),h=n(70579);const m=function(){const e=(0,l.Zp)(),t=(0,l.zy)(),n=(0,u.A)(),m=(0,d.useContext)(p.Ig),f="dark"===n.palette.mode,x=e=>t.pathname===e;return(0,h.jsx)(r.A,{expand:"lg",className:"Nav",children:(0,h.jsxs)(s.A,{fluid:!0,children:[(0,h.jsx)(r.A.Brand,{href:"/User",className:"Heading",children:"Online Voting System"}),(0,h.jsx)(r.A.Toggle,{"aria-controls":"navbarScroll"}),(0,h.jsxs)(r.A.Collapse,{id:"navbarScroll",children:[(0,h.jsxs)(i.A,{className:"me-auto my-2 my-lg-0 Nav-items-container",style:{maxHeight:"100px"},navbarScroll:!0,children:[(0,h.jsx)(i.A.Link,{className:"Nav-items ".concat(x("/User")?"active":""),href:"/User",children:"Home"}),(0,h.jsx)(i.A.Link,{className:"Nav-items ".concat(x("/Vote")?"active":""),href:"/Vote",children:"Vote Now"}),(0,h.jsx)(i.A.Link,{className:"Nav-items ".concat(x("/Results")?"active":""),href:"/Results",children:"View Results"}),(0,h.jsx)(i.A.Link,{className:"Nav-items ".concat(x("/registerCandidate")?"active":""),href:"/registerCandidate",children:"Register as Candidate"}),(0,h.jsx)(i.A.Link,{className:"Nav-items ".concat(x("/Edit")?"active":""),href:"/Edit",children:"My Account"})]}),(0,h.jsxs)(i.A,{className:"ml-auto",children:[(0,h.jsx)(a.A,{variant:f?"outline-light":"outline-dark",onClick:m.toggleColorMode,size:"sm",className:"ThemeToggleButton",style:{marginLeft:"10px",borderColor:"transparent",backgroundColor:"transparent",color:f?"#fff":"#222"},children:f?(0,h.jsx)(c.V6H,{}):(0,h.jsx)(c.wQq,{})}),(0,h.jsx)(a.A,{variant:f?"outline-light":"outline-primary",onClick:()=>{const t=localStorage.getItem("theme");o.A.remove("myCookie"),localStorage.clear(),sessionStorage.clear(),t&&localStorage.setItem("theme",t),e("/Login")},style:{marginLeft:"10px",borderRadius:"0.5rem",fontWeight:"600"},children:"Logout"})]})]})]})})}},8341:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(65043),s=n(97051),i=n(77154),r=n(39194),o=n(1880),l=n(73216),d=n(78745),c=(n(92342),n(70579));const p=()=>{const e=(0,l.Zp)(),[t,n]=(0,a.useState)(!1),[p,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)({name:"",email:"",voterId:"",studentId:"",pass:"",re_pass:"",party:"",bio:"",cgpa:""}),[f,x]=(0,a.useState)(null),[g,v]=(0,a.useState)(null);(0,a.useEffect)((()=>{const t=o.A.get("myCookie");if(!t)return d.oR.error("Session expired. Please login again."),void setTimeout((()=>e("/Login")),2e3);i.A.get("".concat(r.C,"/getVoterbyID/").concat(t)).then((e=>{if(e.data.success&&e.data.voter){const t=e.data.voter;x(t.role||"voter"),v(t),m({name:t.name||"",email:t.email||"",voterId:t.voterId||"",studentId:t.voterId||"",pass:"",re_pass:"",party:t.party||t.department||"",bio:t.bio||"",cgpa:t.cgpa||t.age||""})}else d.oR.error("Failed to load profile data")})).catch((e=>{console.error("Error fetching user data:",e),d.oR.error("Failed to load profile data. Please try again.")})).finally((()=>{u(!1)}))}),[e]);const j=e=>{const{name:t,value:n}=e.target;m({...h,[t]:n})};return p?(0,c.jsxs)("div",{children:[(0,c.jsx)(s.A,{}),(0,c.jsx)("div",{className:"loading-container",children:(0,c.jsx)("h2",{children:"Loading Profile..."})})]}):(0,c.jsxs)("div",{children:[(0,c.jsx)(s.A,{}),(0,c.jsx)("div",{className:"edit-profile-wrapper",children:(0,c.jsxs)("div",{className:"edit-profile-card",children:[(0,c.jsxs)("div",{className:"edit-profile-header",children:[(0,c.jsx)("h2",{children:"candidate"===f?"Edit Candidate Profile":"Edit Personal Details"}),(0,c.jsx)("p",{children:"Update your information and manage your account"})]}),(0,c.jsx)(d.N9,{position:"top-right",autoClose:3e3}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),n(!0),null===f)return d.oR.error("Please wait while we load your profile information..."),void n(!1);if(h.email&&(a=h.email,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)))return d.oR.error("Please enter a valid email address"),void n(!1);var a,s;if(h.voterId&&(s=h.voterId,!/^WCU\d{7}$/.test(s)))return d.oR.error("Please enter a valid WCU Student ID (format: WCU1234567 - exactly 7 digits)"),void n(!1);if(h.pass||h.re_pass){if(h.pass!==h.re_pass)return d.oR.error("Passwords do not match"),void n(!1);if(h.pass.length<6)return d.oR.error("Password must be at least 6 characters long"),void n(!1)}try{const t=o.A.get("myCookie");if(!t)return d.oR.error("Session expired. Please login again."),void e("/Login");const a="candidate"===f,s={name:h.name,email:h.email,voterId:h.voterId};if(a&&(h.party&&(s.party=h.party),h.bio&&(s.bio=h.bio),h.cgpa&&""!==h.cgpa)){const e=parseFloat(h.cgpa);if(isNaN(e)||e<0||e>4)return d.oR.error("CGPA must be a number between 0 and 4.0"),void n(!1);s.cgpa=e}h.pass&&(s.password=h.pass);const l=a?"".concat(r.C,"/updateCandidate/").concat(t):"".concat(r.C,"/updateVoter/").concat(t),c=await i.A.patch(l,s);c.data.success?(d.oR.success("Profile updated successfully!"),m({...h,pass:"",re_pass:""}),setTimeout((()=>{e("/User")}),2e3)):d.oR.error(c.data.message||"Failed to update profile")}catch(l){console.error("Error updating profile:",l),l.response&&l.response.data&&l.response.data.message?d.oR.error(l.response.data.message):d.oR.error("Failed to update profile. Please try again.")}finally{n(!1)}},className:"edit-profile-form",children:["candidate"===f&&(0,c.jsxs)("div",{className:"info-box info",children:[(0,c.jsx)("strong",{children:"Candidate Mode Enabled"}),(0,c.jsx)("br",{}),"You can edit your candidate information including party/department, bio, and CGPA securely here."]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("h3",{className:"section-title",children:"Personal Information"}),(0,c.jsxs)("div",{className:"edit-profile-grid",children:[(0,c.jsxs)("div",{className:"edit-profile-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,c.jsx)("input",{type:"text",name:"name",id:"name",value:h.name,onChange:j,placeholder:"Enter your full name",required:!0})]}),(0,c.jsxs)("div",{className:"edit-profile-group",children:[(0,c.jsx)("label",{htmlFor:"voterId",children:"Student ID"}),(0,c.jsx)("input",{type:"text",name:"voterId",id:"voterId",value:h.voterId,onChange:j,placeholder:"e.g., WCU1234567",required:!0})]}),(0,c.jsxs)("div",{className:"edit-profile-group full-width",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,c.jsx)("input",{type:"email",name:"email",id:"email",value:h.email,onChange:j,placeholder:"yourname@gmail.com",required:!0})]})]})]}),"candidate"===f&&(0,c.jsxs)("div",{className:"edit-profile-section",children:[(0,c.jsx)("h3",{className:"section-title",children:"Candidate Details"}),g&&g.position&&(0,c.jsxs)("div",{className:"info-box success",children:[(0,c.jsx)("strong",{children:"Current Position:"})," ",g.position,(0,c.jsx)("br",{}),(0,c.jsx)("span",{children:"(Assigned pending election results)"})]}),(!g||!g.position)&&(0,c.jsxs)("div",{className:"info-box warning",children:[(0,c.jsx)("strong",{children:"Position Pending:"})," Will be assigned based on election results."]}),(0,c.jsxs)("div",{className:"edit-profile-grid",children:[(0,c.jsxs)("div",{className:"edit-profile-group",children:[(0,c.jsx)("label",{htmlFor:"party",children:"Department / Party"}),(0,c.jsx)("input",{type:"text",name:"party",id:"party",value:h.party,onChange:j,placeholder:"e.g., Computer Science"})]}),(0,c.jsxs)("div",{className:"edit-profile-group",children:[(0,c.jsx)("label",{htmlFor:"cgpa",children:"CGPA"}),(0,c.jsx)("input",{type:"number",name:"cgpa",id:"cgpa",value:h.cgpa,onChange:j,placeholder:"e.g., 3.5",min:"0",max:"4.0",step:"0.01"})]}),(0,c.jsxs)("div",{className:"edit-profile-group full-width",children:[(0,c.jsx)("label",{htmlFor:"bio",children:"Manifesto / Bio"}),(0,c.jsx)("textarea",{name:"bio",id:"bio",value:h.bio,onChange:j,placeholder:"Tell voters about yourself and your goals...",rows:"4"})]})]})]}),(0,c.jsxs)("div",{className:"edit-profile-section",children:[(0,c.jsx)("h3",{className:"section-title",children:"Security"}),(0,c.jsxs)("div",{className:"edit-profile-grid",children:[(0,c.jsxs)("div",{className:"edit-profile-group",children:[(0,c.jsx)("label",{htmlFor:"pass",children:"New Password"}),(0,c.jsx)("input",{type:"password",name:"pass",id:"pass",value:h.pass,onChange:j,placeholder:"Leave blank to keep current",autoComplete:"new-password"})]}),(0,c.jsxs)("div",{className:"edit-profile-group",children:[(0,c.jsx)("label",{htmlFor:"re_pass",children:"Confirm Password"}),(0,c.jsx)("input",{type:"password",name:"re_pass",id:"re_pass",value:h.re_pass,onChange:j,placeholder:"Repeat new password",autoComplete:"new-password"})]})]})]}),(0,c.jsx)("div",{className:"edit-profile-actions",children:(0,c.jsx)("button",{type:"submit",className:"btn-save",disabled:t,children:t?"Saving Changes...":"Save & Update Profile"})})]})]})})]})}},39194:(e,t,n)=>{n.d(t,{C:()=>a});const a="http://localhost:5000"},53519:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(98139),s=n.n(a),i=n(65043),r=n(67852),o=n(70579);const l=i.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:a=!1,as:i="div",className:l,...d}=e;const c=(0,r.oU)(n,"container"),p="string"===typeof a?"-".concat(a):"-fluid";return(0,o.jsx)(i,{ref:t,...d,className:s()(l,a?"".concat(c).concat(p):c)})}));l.displayName="Container";const d=l},9998:(e,t,n)=>{n.d(t,{_K:()=>u,ns:()=>p,kp:()=>c,ze:()=>h,Ay:()=>x});var a=n(98587),s=n(25540),i=n(65043),r=n(97950);const o=!1;var l=n(88726),d="unmounted",c="exited",p="entering",u="entered",h="exiting",m=function(e){function t(t,n){var a;a=e.call(this,t,n)||this;var s,i=n&&!n.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?i?(s=c,a.appearStatus=p):s=u:s=t.unmountOnExit||t.mountOnEnter?d:c,a.state={status:s},a.nextCallback=null,a}(0,s.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:c}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==u&&(t=p):n!==p&&n!==u||(t=h)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!==typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===p){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:d})},n.performEnter=function(e){var t=this,n=this.props.enter,a=this.context?this.context.isMounting:e,s=this.props.nodeRef?[a]:[r.findDOMNode(this),a],i=s[0],l=s[1],d=this.getTimeouts(),c=a?d.appear:d.enter;!e&&!n||o?this.safeSetState({status:u},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,l),this.safeSetState({status:p},(function(){t.props.onEntering(i,l),t.onTransitionEnd(c,(function(){t.safeSetState({status:u},(function(){t.props.onEntered(i,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),a=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!o?(this.props.onExit(a),this.safeSetState({status:h},(function(){e.props.onExiting(a),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:c},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:c},(function(){e.props.onExited(a)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(n&&!a){if(this.props.addEndListener){var s=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=s[0],o=s[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,n=t.children,s=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,a.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(l.A.Provider,{value:null},"function"===typeof n?n(e,s):i.cloneElement(i.Children.only(n),s))},t}(i.Component);function f(){}m.contextType=l.A,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},m.UNMOUNTED=d,m.EXITED=c,m.ENTERING=p,m.ENTERED=u,m.EXITING=h;const x=m},92342:()=>{},32048:()=>{},1880:(e,t,n)=>{function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}n.d(t,{A:()=>s});var s=function e(t,n){function s(e,s,i){if("undefined"!==typeof document){"number"===typeof(i=a({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var o in i)i[o]&&(r+="; "+o,!0!==i[o]&&(r+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+r}}return Object.create({set:s,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],a={},s=0;s<n.length;s++){var i=n[s].split("="),r=i.slice(1).join("=");try{var o=decodeURIComponent(i[0]);if(a[o]=t.read(r,o),e===o)break}catch(l){}}return e?a[e]:a}},remove:function(e,t){s(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);
//# sourceMappingURL=5474.c4a5f446.chunk.js.map