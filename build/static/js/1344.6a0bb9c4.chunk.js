"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[1344],{97051:(e,t,r)=>{r.d(t,{A:()=>h});r(38421);var o=r(14282),a=r(53519),i=r(88649),n=r(52624),s=(r(32048),r(1880)),l=r(73216),c=r(65043),d=r(13204),g=r(12841),m=r(26240),u=r(70579);const h=function(){const e=(0,l.Zp)(),t=(0,l.zy)(),r=(0,m.A)(),h=(0,c.useContext)(g.Ig),x="dark"===r.palette.mode,f=e=>t.pathname===e;return(0,u.jsx)(n.A,{expand:"lg",className:"Nav",children:(0,u.jsxs)(a.A,{fluid:!0,children:[(0,u.jsx)(n.A.Brand,{href:"/User",className:"Heading",children:"Online Voting System"}),(0,u.jsx)(n.A.Toggle,{"aria-controls":"navbarScroll"}),(0,u.jsxs)(n.A.Collapse,{id:"navbarScroll",children:[(0,u.jsxs)(i.A,{className:"me-auto my-2 my-lg-0 Nav-items-container",style:{maxHeight:"100px"},navbarScroll:!0,children:[(0,u.jsx)(i.A.Link,{className:"Nav-items ".concat(f("/User")?"active":""),href:"/User",children:"Home"}),(0,u.jsx)(i.A.Link,{className:"Nav-items ".concat(f("/Vote")?"active":""),href:"/Vote",children:"Vote Now"}),(0,u.jsx)(i.A.Link,{className:"Nav-items ".concat(f("/Results")?"active":""),href:"/Results",children:"View Results"}),(0,u.jsx)(i.A.Link,{className:"Nav-items ".concat(f("/registerCandidate")?"active":""),href:"/registerCandidate",children:"Register as Candidate"}),(0,u.jsx)(i.A.Link,{className:"Nav-items ".concat(f("/Edit")?"active":""),href:"/Edit",children:"My Account"})]}),(0,u.jsxs)(i.A,{className:"ml-auto",children:[(0,u.jsx)(o.A,{variant:x?"outline-light":"outline-dark",onClick:h.toggleColorMode,size:"sm",className:"ThemeToggleButton",style:{marginLeft:"10px",borderColor:"transparent",backgroundColor:"transparent",color:x?"#fff":"#222"},children:x?(0,u.jsx)(d.V6H,{}):(0,u.jsx)(d.wQq,{})}),(0,u.jsx)(o.A,{variant:x?"outline-light":"outline-primary",onClick:()=>{const t=localStorage.getItem("theme");s.A.remove("myCookie"),localStorage.clear(),sessionStorage.clear(),t&&localStorage.setItem("theme",t),e("/Login")},style:{marginLeft:"10px",borderRadius:"0.5rem",fontWeight:"600"},children:"Logout"})]})]})]})})}},61344:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var o=r(65043),a=r(73216),i=r(77154),n=r(97051),s=r(19252),l=r(67254),c=r(96446),d=r(85865),g=r(68903),m=r(63336),u=r(39336),h=r(39194),x=r(1880),f=r(12110),p=r(81045),v=r(77739),b=r(17392),j=r(81637),y=r(26494),A=r(43845),w=r(14545),I=r(19778),C=r(85502),S=r(70579);const N="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjYwIiBmaWxsPSIjOTk5IiBmb250LWZhbWlseT0iQXJpYWwiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjxzdHlsZT4uc3R5bGUxe2ZvbnQtc2l6ZTo4MHB4fTwvc3R5bGU+PHRzcGFuIGNsYXNzPSJzdHlsZTEiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNDQ4IDUxMiIgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjOTk5Ij48cGF0aCBkPSJNMjI0IDI1NmMtNzAuNyAwLTEyOC01Ny4zLTEyOC0xMjhTMTUzLjMgMCAyMjQgMHMxMjggNTcuMyAxMjggMTI4LTU3LjMgMTI4LTEyOCAxMjh6bTg5LjYgMzJoLTE5LjJjLTIwLjIgMTAtNDMuNCAxNi03NjQgMTYtMzEuNSAwLTU2LjItNi05NS40LTE2aC0xOS4yQzU3LjMgMjg4IDAgMzQ1LjMgMCA0MTYuMlY0MzJjMCA0NC4xIDM1LjkgODAgODAgODBoMjg4YzQ0LjEgMCA4MC0zNS45IDgwLTgwdi0xNi4yYzAtNzAuOS01Ni43LTEyOC0xMjh6Ii8+PC9zdmc+PC90c3Bhbj48L3RleHQ+PC9zdmc+";function M(e){let{voter:t,onPhotoUpdate:r}=e;const[a,n]=(0,o.useState)(!1),[s,l]=(0,o.useState)(t.img||t.image),g=(0,o.useRef)(null),m=s||t.img||t.image,u=m?"".concat(h.C).concat(m):N;return(0,S.jsxs)(f.A,{className:"card-standard",sx:{borderRadius:"var(--radius-xl)",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",p:3,backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",boxShadow:"var(--shadow-md)",position:"relative",overflow:"visible"},children:[(0,S.jsxs)(c.A,{sx:{position:"relative",mt:1,mb:3,"&::after":{content:'""',position:"absolute",top:-8,left:-8,right:-8,bottom:-8,borderRadius:"50%",background:"var(--grad-primary)",zIndex:-1,opacity:.2}},children:[(0,S.jsx)(p.A,{src:u,alt:t.name||"User Profile",sx:{width:160,height:160,border:"4px solid var(--bg-surface)",boxShadow:"0 8px 32px var(--shadow-color)",transition:"transform 0.3s ease"},imgProps:{onError:e=>{e.target.src=N}}}),(0,S.jsx)(v.A,{title:"Change Photo",children:(0,S.jsx)(b.A,{onClick:()=>{g.current.click()},sx:{position:"absolute",bottom:8,right:8,backgroundColor:"var(--color-primary)",color:"white",width:40,height:40,boxShadow:"0 4px 12px var(--button-shadow)","&:hover":{backgroundColor:"var(--color-primary-dark)",transform:"scale(1.1)"},transition:"all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},disabled:a,children:a?(0,S.jsx)(j.A,{size:20,color:"inherit"}):(0,S.jsx)(w.A,{sx:{fontSize:20}})})})]}),(0,S.jsx)("input",{type:"file",ref:g,onChange:async e=>{const o=e.target.files[0];if(!o)return;if(["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(o.type))if(o.size>5242880)alert("Image size should be less than 5MB");else{n(!0);try{const e=t._id||x.A.get("myCookie");if(!e)return void alert("Session expired. Please login again.");const a=new FormData;a.append("photo",o);const n=await i.A.post("".concat(h.C,"/uploadVoterPhoto/").concat(e),a,{headers:{"Content-Type":"multipart/form-data"}});n.data.success?(l(n.data.img),alert("Profile photo updated successfully!"),r&&r(n.data.img),window.location.reload()):alert(n.data.message||"Failed to upload photo")}catch(a){console.error("Error uploading photo:",a),alert("Failed to upload photo. Please try again.")}finally{n(!1)}}else alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)")},accept:"image/*",style:{display:"none"}}),(0,S.jsxs)(y.A,{sx:{width:"100%",textAlign:"center",p:0},children:[(0,S.jsx)(d.A,{variant:"h5",component:"div",sx:{fontWeight:"var(--font-weight-bold)",color:"var(--text-primary)",fontFamily:"var(--font-primary)",mb:2},children:t.name||"".concat(t.firstName||""," ").concat(t.lastName||"")}),(0,S.jsxs)(c.A,{sx:{mb:3,p:2,borderRadius:"var(--radius-lg)",backgroundColor:"rgba(104, 112, 250, 0.05)",border:"1px dashed var(--border-color)"},children:[(0,S.jsx)(d.A,{variant:"body2",color:"var(--text-secondary)",sx:{textTransform:"uppercase",letterSpacing:2,fontSize:"0.7rem",fontWeight:"var(--font-weight-bold)",mb:.5},children:"Student ID"}),(0,S.jsx)(d.A,{variant:"h6",sx:{color:"var(--color-primary)",fontWeight:"var(--font-weight-extrabold)",fontFamily:"var(--font-mono)"},children:t.voterId||t.voterid||"-"})]}),(0,S.jsx)(c.A,{sx:{mt:1},children:(0,S.jsx)(A.A,{icon:t.voteStatus?(0,S.jsx)(I.A,{style:{color:"white"}}):(0,S.jsx)(C.A,{style:{color:"white"}}),label:t.voteStatus?"Vote Casted":"Voting Pending",sx:{fontWeight:"var(--font-weight-bold)",px:2,py:2.5,borderRadius:"var(--radius-md)",backgroundColor:t.voteStatus?"var(--color-success)":"var(--color-error)",color:"white",fontSize:"0.9rem",boxShadow:t.voteStatus?"0 4px 12px rgba(76, 206, 172, 0.3)":"0 4px 12px rgba(219, 79, 74, 0.3)"}})})]})]})}var k=r(98666),z=r(11906),L=r(42969);const W=e=>{let{voteStatus:t}=e;const r=(0,a.Zp)(),i=(0,o.useRef)(null),n=(0,o.useRef)(null),s=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const e=(0,k.A)({duration:800,delay:100,distance:"30px",easing:"ease",reset:!1});i.current&&e.reveal(i.current,{origin:"bottom"}),n.current&&e.reveal(n.current,{origin:"left"}),s.current&&e.reveal(s.current,{origin:"top"})}),[]),(0,S.jsxs)(c.A,{sx:{mt:4,mb:4},className:"upcomingElections",children:[(0,S.jsx)(d.A,{variant:"h4",component:"h2",align:"center",gutterBottom:!0,sx:{color:"var(--text-primary)",mb:5,fontWeight:"var(--font-weight-extrabold)",fontFamily:"var(--font-primary)",letterSpacing:"-0.025em"},ref:s,children:"Upcoming Elections"}),(0,S.jsx)(g.Ay,{container:!0,justifyContent:"center",ref:n,children:(0,S.jsx)(g.Ay,{item:!0,xs:12,md:8,lg:7,children:(0,S.jsx)(f.A,{className:"card-standard",sx:{borderRadius:"var(--radius-xl)",overflow:"hidden",background:"var(--grad-surface)",border:"1px solid var(--border-color)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"6px",background:"var(--grad-primary)"}},children:(0,S.jsxs)(y.A,{sx:{textAlign:"center",p:{xs:3,md:5}},children:[(0,S.jsx)(c.A,{sx:{display:"inline-flex",mb:2},children:(0,S.jsx)(A.A,{label:"Active Election",className:t?"":"pulse-primary",sx:{backgroundColor:"var(--color-primary)",color:"white",fontWeight:"var(--font-weight-bold)",fontSize:"0.75rem",height:24}})}),(0,S.jsx)(d.A,{variant:"h4",component:"h3",gutterBottom:!0,sx:{fontWeight:"var(--font-weight-bold)",color:"var(--color-primary)",fontFamily:"var(--font-primary)"},children:"WCU Student President Election"}),(0,S.jsx)(d.A,{variant:"body1",paragraph:!0,sx:{color:"var(--text-secondary)",mb:4,fontSize:"1.1rem",lineHeight:1.6,maxWidth:"600px",mx:"auto"},children:"Vote to elect the Wachemo University Student President. Your participation shapes the future of our campus community."}),(0,S.jsx)(z.A,{variant:"contained",size:"large",startIcon:(0,S.jsx)(L.A,{}),onClick:()=>r("/Vote"),disabled:t,sx:{px:6,py:2,borderRadius:"var(--radius-full)",textTransform:"none",fontSize:"1.1rem",fontWeight:"var(--font-weight-bold)",background:"var(--grad-primary)",boxShadow:"0 8px 32px var(--button-shadow)","&:hover":{background:"var(--color-primary-dark)",transform:"translateY(-2px)"},"&:disabled":{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},transition:"all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)"},children:t?"Submission Received":"Cast Your Vote Now"}),(0,S.jsx)(c.A,{sx:{mt:3},children:(0,S.jsx)(d.A,{variant:"caption",sx:{color:"var(--text-muted)",display:"block"},children:"Secure \u2022 Encrypted \u2022 Confidential"})})]})})})})]})},T=()=>{const e=(0,a.zy)(),{voterst:t}=e.state||{};(0,o.useEffect)((()=>{t&&t.id&&x.A.set("myCookie",t.id,{expires:7})}),[t]);const r=x.A.get("myCookie"),f=(0,o.useRef)(null),p=(0,o.useRef)(null),v=(0,o.useRef)(null),b=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e={duration:600,delay:50,distance:"30px",easing:"ease",reset:!1};f.current&&(0,k.A)().reveal(f.current,{...e,origin:"bottom"}),b.current&&(0,k.A)().reveal(b.current,{...e,origin:"right"}),p.current&&(0,k.A)().reveal(p.current,{...e,origin:"left"}),v.current&&(0,k.A)().reveal(v.current,{...e,origin:"top"})}),[]);const[j,y]=(0,o.useState)([]),[A,w]=(0,o.useState)(null),[I,C]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{if(!t||!t.id||r)return r?void i.A.get("".concat(h.C,"/getVoterbyID/").concat(r)).then((e=>{e.data.success?(y(e.data.voter),w(null)):w(e.data.message||"Failed to load voter information")})).catch((e=>{console.error("Error fetching user data:",e),w("Failed to load voter information. Please try logging in again.")})).finally((()=>{C(!1)})):(console.warn("No voter ID found in cookie"),t||w("Session not found. Please login again."),void C(!1));C(!1)}),[r,t]),(0,S.jsxs)("div",{style:{backgroundColor:"#f5f5f5",minHeight:"100vh"},children:[(0,S.jsx)(n.A,{}),(0,S.jsxs)(s.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[A&&(0,S.jsxs)(l.A,{severity:"error",sx:{mb:3},children:[A," - ",(0,S.jsx)("a",{href:"/Login",style:{color:"inherit",textDecoration:"underline"},children:"Login"})]}),(0,S.jsx)(c.A,{sx:{textAlign:"center",mb:4},ref:v,children:(0,S.jsxs)(d.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"#333"},children:["Welcome ",(0,S.jsx)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:j.firstName||j.name})]})}),(0,S.jsxs)(g.Ay,{container:!0,spacing:4,children:[(0,S.jsx)(g.Ay,{item:!0,xs:12,md:4,ref:p,children:(0,S.jsx)(M,{voter:j})}),(0,S.jsx)(g.Ay,{item:!0,xs:12,md:8,ref:b,children:(0,S.jsxs)(m.A,{elevation:3,sx:{p:4,height:"100%",borderRadius:2,backgroundColor:"#ffffff"},children:[(0,S.jsxs)(d.A,{variant:"h4",gutterBottom:!0,sx:{color:"#333"},children:["Welcome to ",(0,S.jsx)("span",{style:{color:"#1976d2",fontWeight:"bold"},children:"Online Voting Platform"})]}),(0,S.jsx)(d.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#555",fontStyle:"italic",mb:3},children:"Exercise Your Right to Vote Anytime, Anywhere"}),(0,S.jsx)(u.A,{sx:{mb:3}}),(0,S.jsx)(d.A,{variant:"body1",paragraph:!0,sx:{lineHeight:1.8,color:"#444",textAlign:"justify"},children:"Welcome to our online voting platform, where your voice matters. With the convenience of modern technology, we bring democracy to your fingertips, enabling you to participate in important decisions and elections from the comfort of your own home."}),(0,S.jsx)(d.A,{variant:"body1",paragraph:!0,sx:{lineHeight:1.8,color:"#444",textAlign:"justify"},children:"Our secure and user-friendly platform ensures that your vote is counted accurately and confidentially. Whether it's electing your local representatives, deciding on community initiatives, or participating in organizational polls, our platform empowers you to make a difference."})]})}),(0,S.jsx)(g.Ay,{item:!0,xs:12,ref:f,children:(0,S.jsx)(W,{voteStatus:j.voteStatus})})]})]})]})}},39194:(e,t,r)=>{r.d(t,{C:()=>o});const o="http://localhost:5000"},32048:()=>{}}]);
//# sourceMappingURL=1344.6a0bb9c4.chunk.js.map